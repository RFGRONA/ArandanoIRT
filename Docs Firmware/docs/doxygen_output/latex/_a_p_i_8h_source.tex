\doxysection{API.\+h}
\hypertarget{_a_p_i_8h_source}{}\label{_a_p_i_8h_source}\index{lib/API/API.h@{lib/API/API.h}}
\mbox{\hyperlink{_a_p_i_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#ifndef\ API\_H}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#define\ API\_H}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <WiFi.h>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <HTTPClient.h>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <ArduinoJson.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <Preferences.h>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_l_e_d_status_8h}{LEDStatus.h}}"{}}\ \textcolor{comment}{//\ Assuming\ LEDStatus.h\ defines\ the\ necessary\ states\ like\ ERROR\_AUTH,\ ERROR\_SEND,\ OFF}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00016\ \textcolor{comment}{//\ Backend\ Endpoints\ (HTTPS\ is\ used)}}
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#define\ ACTIVATION\_ENDPOINT\ \ \ \ \ \ \ "{}https://backend.example.com/activate"{}\ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00018\ \textcolor{preprocessor}{\#define\ CHECK\_ACTIVATION\_ENDPOINT\ "{}https://backend.example.com/check\_activation/"{}\ }}
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#define\ BACKEND\_STATUS\_ENDPOINT\ \ \ "{}https://backend.example.com/status"{}\ \ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \textcolor{comment}{//\ -\/-\/-\/\ Security\ Credentials\ -\/-\/-\/}}
\DoxyCodeLine{00022\ \textcolor{comment}{//\ @warning\ These\ credentials\ (JWT,\ Device\ ID)\ are\ hardcoded.}}
\DoxyCodeLine{00023\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ \ For\ production\ environments,\ consider\ more\ secure\ methods\ like\ provisioning\ or\ secure\ storage.}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\#define\ ACTIVATION\_JWT\ "{}your\_activation\_jwt\_here"{}\ }}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#define\ DEVICE\_ID\ \ \ \ \ \ "{}your\_device\_id\_here"{}\ \ \ \ \ \ }}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ \textcolor{comment}{//\ Activation\ States\ stored\ in\ NVS}}
\DoxyCodeLine{00028\ \textcolor{preprocessor}{\#define\ STATE\_ACTIVATED\ \ \ \ \ "{}ACTIVATED"{}\ \ \ \ \ }}
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ STATE\_NO\_ACTIVATED\ \ "{}NO\_ACTIVATED"{}\ \ }}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{comment}{//\ Keys\ for\ storing\ data\ in\ Preferences\ (NVS)}}
\DoxyCodeLine{00032\ \textcolor{preprocessor}{\#define\ PREF\_ACTIVATION\_STATE\ "{}activation\_state"{}\ }}
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ PREF\_AUTH\_TOKEN\ \ \ \ \ \ \ "{}auth\_token"{}\ \ \ \ \ \ \ }}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \textcolor{comment}{//\ HTTP\ Request\ Configuration}}
\DoxyCodeLine{00036\ \textcolor{preprocessor}{\#define\ HTTP\_TIMEOUT\ \ \ \ \ 10000\ }}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ HTTP\_MAX\_RETRIES\ 3\ \ \ \ \ }}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00050\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_a_p_i}{API}}\ \{}
\DoxyCodeLine{00051\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00056\ \ \ \ \ \mbox{\hyperlink{class_a_p_i_adb63c7166868fb7d32cd11d4a457701c}{API}}();}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_a_p_i_acdcc14103bf9fb83981814d0ad5431cf}{activateDevice}}();}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_a_p_i_ad1eb726b035fb93aff32dead3bf646fc}{checkActivation}}();}
\DoxyCodeLine{00081\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_a_p_i_a4b5e41385595c8b20c8de569d735cc0d}{checkBackendStatus}}();}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00097\ \ \ \ \ String\ \mbox{\hyperlink{class_a_p_i_a9f7a74880b1bbd9f0605d237c45aadd2}{getAuthToken}}();}
\DoxyCodeLine{00098\ }
\DoxyCodeLine{00099\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00100\ \ \ \ \ \mbox{\hyperlink{class_l_e_d_status}{LEDStatus}}\ \_led;\ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00101\ \ \ \ \ Preferences\ \_preferences;}
\DoxyCodeLine{00102\ \ \ \ \ String\ \_authToken;\ \ \ \ \ \ \ }
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keywordtype}{void}\ saveActivationState(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ state);}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keywordtype}{void}\ saveAuthToken(\textcolor{keyword}{const}\ String\ \&token);}
\DoxyCodeLine{00117\ \};}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00119\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ API\_H}}

\end{DoxyCode}
