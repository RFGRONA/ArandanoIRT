<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1106px" preserveAspectRatio="none" style="width:1313px;height:1106px;background:#FFFFFF;" version="1.1" viewBox="0 0 1313 1106" width="1313px" zoomAndPan="magnify"><title>6.1: Flujo de Activación y Autenticación</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="312.915" x="496.1228" y="27.9951">6.1: Flujo de Activación y Autenticación</text><g><title>.api.device-api</title><rect fill="#FFFFFF" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="359.8672" y="207.9922"/></g><g><title>.api.device-api</title><rect fill="#FFFFFF" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="359.8672" y="835.8594"/></g><g><title>IDeviceService</title><rect fill="#FFFFFF" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="675.8936" y="237.125"/></g><g><title>IDeviceService</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="675.8936" y="572.125"/></g><g><title>IDeviceService</title><rect fill="#FFFFFF" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="675.8936" y="864.9922"/></g><g><title>DeviceAuthHandler</title><rect fill="#FFFFFF" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="971.4043" y="542.9922"/></g><g><title>Device</title><rect fill="#000000" fill-opacity="0.00000" height="304.1953" width="8" x="27.9395" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="31" x2="31" y1="118.5938" y2="422.7891"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="31" x2="31" y1="422.7891" y2="463.5938"/><g><title>Device</title><rect fill="#000000" fill-opacity="0.00000" height="252.0625" width="8" x="27.9395" y="463.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="31" x2="31" y1="463.5938" y2="715.6563"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="31" x2="31" y1="715.6563" y2="756.4609"/><g><title>Device</title><rect fill="#000000" fill-opacity="0.00000" height="269.0625" width="8" x="27.9395" y="756.4609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="31" x2="31" y1="756.4609" y2="1025.5234"/></g><g><title>.api.device-api</title><rect fill="#000000" fill-opacity="0.00000" height="304.1953" width="8" x="360.8672" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="364.2764" x2="364.2764" y1="118.5938" y2="422.7891"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="364.2764" x2="364.2764" y1="422.7891" y2="463.5938"/><g><title>.api.device-api</title><rect fill="#000000" fill-opacity="0.00000" height="252.0625" width="8" x="360.8672" y="463.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="364.2764" x2="364.2764" y1="463.5938" y2="715.6563"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="364.2764" x2="364.2764" y1="715.6563" y2="756.4609"/><g><title>.api.device-api</title><rect fill="#000000" fill-opacity="0.00000" height="269.0625" width="8" x="360.8672" y="756.4609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="364.2764" x2="364.2764" y1="756.4609" y2="1025.5234"/></g><g><title>IDeviceService</title><rect fill="#000000" fill-opacity="0.00000" height="304.1953" width="8" x="676.8936" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="680.019" x2="680.019" y1="118.5938" y2="422.7891"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="680.019" x2="680.019" y1="422.7891" y2="463.5938"/><g><title>IDeviceService</title><rect fill="#000000" fill-opacity="0.00000" height="252.0625" width="8" x="676.8936" y="463.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="680.019" x2="680.019" y1="463.5938" y2="715.6563"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="680.019" x2="680.019" y1="715.6563" y2="756.4609"/><g><title>IDeviceService</title><rect fill="#000000" fill-opacity="0.00000" height="269.0625" width="8" x="676.8936" y="756.4609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="680.019" x2="680.019" y1="756.4609" y2="1025.5234"/></g><g><title>DeviceAuthHandler</title><rect fill="#000000" fill-opacity="0.00000" height="304.1953" width="8" x="972.4043" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="975.4961" x2="975.4961" y1="118.5938" y2="422.7891"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="975.4961" x2="975.4961" y1="422.7891" y2="463.5938"/><g><title>DeviceAuthHandler</title><rect fill="#000000" fill-opacity="0.00000" height="252.0625" width="8" x="972.4043" y="463.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="975.4961" x2="975.4961" y1="463.5938" y2="715.6563"/></g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:1,4;" x1="975.4961" x2="975.4961" y1="715.6563" y2="756.4609"/><g><title>DeviceAuthHandler</title><rect fill="#000000" fill-opacity="0.00000" height="269.0625" width="8" x="972.4043" y="756.4609"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5,5;" x1="975.4961" x2="975.4961" y1="756.4609" y2="1025.5234"/></g><g class="participant participant-head" data-participant="D"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.8789" x="5" y="115.292">Device</text><ellipse cx="31.9395" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.9395,58.7969 L31.9395,85.7969 M18.9395,66.7969 L44.9395,66.7969 M31.9395,85.7969 L18.9395,100.7969 M31.9395,85.7969 L44.9395,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="D"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.8789" x="5" y="1037.5186">Device</text><ellipse cx="31.9395" cy="1049.3203" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M31.9395,1057.3203 L31.9395,1084.3203 M18.9395,1065.3203 L44.9395,1065.3203 M31.9395,1084.3203 L18.9395,1099.3203 M31.9395,1084.3203 L44.9395,1099.3203" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.1816" x="306.2764" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.1816" x="313.2764" y="107.292">/api/device-api</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.1816" x="306.2764" y="1024.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.1816" x="313.2764" y="1044.5186">/api/device-api</text></g><g class="participant participant-head" data-participant="DeviceSvc"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.749" x="622.019" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.749" x="629.019" y="107.292">IDeviceService</text></g><g class="participant participant-tail" data-participant="DeviceSvc"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="117.749" x="622.019" y="1024.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103.749" x="629.019" y="1044.5186">IDeviceService</text></g><g class="participant participant-head" data-participant="AuthMw"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.8164" x="901.4961" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.8164" x="908.4961" y="107.292">DeviceAuthHandler</text></g><g class="participant participant-tail" data-participant="AuthMw"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="149.8164" x="901.4961" y="1024.5234"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.8164" x="908.4961" y="1044.5186">DeviceAuthHandler</text></g><g><title>.api.device-api</title><rect fill="#FFFFFF" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="359.8672" y="207.9922"/></g><g><title>.api.device-api</title><rect fill="#FFFFFF" height="171.6641" style="stroke:#181818;stroke-width:1;" width="10" x="359.8672" y="835.8594"/></g><g><title>IDeviceService</title><rect fill="#FFFFFF" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="675.8936" y="237.125"/></g><g><title>IDeviceService</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1;" width="10" x="675.8936" y="572.125"/></g><g><title>IDeviceService</title><rect fill="#FFFFFF" height="113.3984" style="stroke:#181818;stroke-width:1;" width="10" x="675.8936" y="864.9922"/></g><g><title>DeviceAuthHandler</title><rect fill="#FFFFFF" height="129.5313" style="stroke:#181818;stroke-width:1;" width="10" x="971.4043" y="542.9922"/></g><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1306.1606" x="0" y="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1306.1606" y1="149.1602" y2="149.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1306.1606" y1="152.1602" y2="152.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="238.5991" x="533.7808" y="138.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="220.0732" x="539.7808" y="154.6606">Fase 1: Activación (Única vez)</text><g class="message" data-participant-1="D" data-participant-2="API"><polygon fill="#181818" points="347.8672,203.9922,357.8672,207.9922,347.8672,211.9922,351.8672,207.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="31.9395" x2="353.8672" y1="207.9922" y2="207.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.3545" x="38.9395" y="187.7935">POST /activate</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="229.8169" x="38.9395" y="202.9263">(HardwareId, ActivationCode, MAC)</text></g><g class="message" data-participant-1="API" data-participant-2="DeviceSvc"><polygon fill="#181818" points="663.8936,233.125,673.8936,237.125,663.8936,241.125,667.8936,237.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="369.8672" x2="669.8936" y1="237.125" y2="237.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.853" x="376.8672" y="232.0591">ActivateDeviceAsync()</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="DeviceSvc"><line style="stroke:#181818;stroke-width:1;" x1="685.8936" x2="727.8936" y1="266.2578" y2="266.2578"/><line style="stroke:#181818;stroke-width:1;" x1="727.8936" x2="727.8936" y1="266.2578" y2="279.2578"/><line style="stroke:#181818;stroke-width:1;" x1="686.8936" x2="727.8936" y1="279.2578" y2="279.2578"/><polygon fill="#181818" points="696.8936,275.2578,686.8936,279.2578,696.8936,283.2578,692.8936,279.2578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.0732" x="692.8936" y="261.1919">Validar código, HWId y MAC</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="DeviceSvc"><line style="stroke:#181818;stroke-width:1;" x1="685.8936" x2="727.8936" y1="308.3906" y2="308.3906"/><line style="stroke:#181818;stroke-width:1;" x1="727.8936" x2="727.8936" y1="308.3906" y2="321.3906"/><line style="stroke:#181818;stroke-width:1;" x1="686.8936" x2="727.8936" y1="321.3906" y2="321.3906"/><polygon fill="#181818" points="696.8936,317.3906,686.8936,321.3906,696.8936,325.3906,692.8936,321.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="244.9688" x="692.8936" y="303.3247">Marcar como ACTIVO, generar tokens</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="API"><polygon fill="#181818" points="380.8672,346.5234,370.8672,350.5234,380.8672,354.5234,376.8672,350.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="374.8672" x2="679.8936" y1="350.5234" y2="350.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.5439" x="386.8672" y="345.4575">Access Token, Refresh Token</text></g><g class="message" data-participant-1="API" data-participant-2="D"><polygon fill="#181818" points="42.9395,375.6563,32.9395,379.6563,42.9395,383.6563,38.9395,379.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="36.9395" x2="363.8672" y1="379.6563" y2="379.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.8877" x="48.9395" y="374.5903">Ok (200) con Tokens</text></g><path d="M36,392.6563 L36,417.6563 L396,417.6563 L396,402.6563 L386,392.6563 L36,392.6563" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M386,392.6563 L386,402.6563 L396,402.6563 L386,392.6563" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="339.2822" x="42" y="409.7231">El dispositivo almacena los tokens de forma segura.</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="90.9165" x="458.7136" y="446.9995">20 minutes later</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1306.1606" x="0" y="484.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1306.1606" y1="484.1602" y2="484.1602"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1306.1606" y1="487.1602" y2="487.1602"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="280.2207" x="512.97" y="473.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="261.6948" x="518.97" y="489.6606">Fase 2: Autenticación de Peticiones</text><g class="message" data-participant-1="D" data-participant-2="API"><polygon fill="#181818" points="352.8672,538.9922,362.8672,542.9922,352.8672,546.9922,356.8672,542.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="31.9395" x2="358.8672" y1="542.9922" y2="542.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.2939" x="38.9395" y="522.7935">GET /some-protected-endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308.9277" x="38.9395" y="537.9263">Header: Authorization: Device &lt;access_token&gt;</text></g><g class="message" data-participant-1="AuthMw" data-participant-2="DeviceSvc"><polygon fill="#181818" points="696.8936,568.125,686.8936,572.125,696.8936,576.125,692.8936,572.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="690.8936" x2="970.4043" y1="572.125" y2="572.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.3027" x="702.8936" y="567.0591">Validar Access Token</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="AuthMw"><polygon fill="#181818" points="959.4043,597.2578,969.4043,601.2578,959.4043,605.2578,963.4043,601.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="680.8936" x2="965.4043" y1="601.2578" y2="601.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84.0811" x="687.8936" y="596.1919">Token Válido</text></g><g class="message" data-participant-1="AuthMw" data-participant-2="AuthMw"><line style="stroke:#181818;stroke-width:1;" x1="981.4043" x2="1023.4043" y1="630.3906" y2="630.3906"/><line style="stroke:#181818;stroke-width:1;" x1="1023.4043" x2="1023.4043" y1="630.3906" y2="643.3906"/><line style="stroke:#181818;stroke-width:1;" x1="982.4043" x2="1023.4043" y1="643.3906" y2="643.3906"/><polygon fill="#181818" points="992.4043,639.3906,982.4043,643.3906,992.4043,647.3906,988.4043,643.3906" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295.7563" x="988.4043" y="625.3247">Crear ClaimsPrincipal (DeviceId, PlantId, etc.)</text></g><g class="message" data-participant-1="AuthMw" data-participant-2="API"><polygon fill="#181818" points="375.8672,668.5234,365.8672,672.5234,375.8672,676.5234,371.8672,672.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="369.8672" x2="975.4043" y1="672.5234" y2="672.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.8521" x="381.8672" y="667.4575">Petición autorizada</text></g><path d="M369,685.5234 L369,710.5234 L668,710.5234 L668,695.5234 L658,685.5234 L369,685.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M658,685.5234 L658,695.5234 L668,695.5234 L658,685.5234" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="278.0781" x="375" y="702.5903">La petición continúa hacia el controlador...</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81.4258" x="463.459" y="739.8667">Horas después</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1;" width="1306.1606" x="0" y="777.0273"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1306.1606" y1="777.0273" y2="777.0273"/><line style="stroke:#000000;stroke-width:1;" x1="0" x2="1306.1606" y1="780.0273" y2="780.0273"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2;" width="211.8057" x="547.1775" y="766.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="193.2798" x="553.1775" y="782.5278">Fase 3: Refresco de Token</text><g class="message" data-participant-1="D" data-participant-2="API"><polygon fill="#181818" points="347.8672,831.8594,357.8672,835.8594,347.8672,839.8594,351.8672,835.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="31.9395" x2="353.8672" y1="835.8594" y2="835.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.5586" x="38.9395" y="815.6606">POST /refresh-token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="99.7661" x="38.9395" y="830.7935">(RefreshToken)</text></g><g class="message" data-participant-1="API" data-participant-2="DeviceSvc"><polygon fill="#181818" points="663.8936,860.9922,673.8936,864.9922,663.8936,868.9922,667.8936,864.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="369.8672" x2="669.8936" y1="864.9922" y2="864.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.9712" x="376.8672" y="859.9263">RefreshDeviceTokenAsync()</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="DeviceSvc"><line style="stroke:#181818;stroke-width:1;" x1="685.8936" x2="727.8936" y1="894.125" y2="894.125"/><line style="stroke:#181818;stroke-width:1;" x1="727.8936" x2="727.8936" y1="894.125" y2="907.125"/><line style="stroke:#181818;stroke-width:1;" x1="686.8936" x2="727.8936" y1="907.125" y2="907.125"/><polygon fill="#181818" points="696.8936,903.125,686.8936,907.125,696.8936,911.125,692.8936,907.125" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="261.5107" x="692.8936" y="889.0591">Validar Refresh Token, revocar antiguos</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="DeviceSvc"><line style="stroke:#181818;stroke-width:1;" x1="685.8936" x2="727.8936" y1="936.2578" y2="936.2578"/><line style="stroke:#181818;stroke-width:1;" x1="727.8936" x2="727.8936" y1="936.2578" y2="949.2578"/><line style="stroke:#181818;stroke-width:1;" x1="686.8936" x2="727.8936" y1="949.2578" y2="949.2578"/><polygon fill="#181818" points="696.8936,945.2578,686.8936,949.2578,696.8936,953.2578,692.8936,949.2578" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.02" x="692.8936" y="931.1919">Generar nuevo par de tokens</text></g><g class="message" data-participant-1="DeviceSvc" data-participant-2="API"><polygon fill="#181818" points="380.8672,974.3906,370.8672,978.3906,380.8672,982.3906,376.8672,978.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="374.8672" x2="679.8936" y1="978.3906" y2="978.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="282.0264" x="386.8672" y="973.3247">Nuevo Access Token, Nuevo Refresh Token</text></g><g class="message" data-participant-1="API" data-participant-2="D"><polygon fill="#181818" points="42.9395,1003.5234,32.9395,1007.5234,42.9395,1011.5234,38.9395,1007.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2,2;" x1="36.9395" x2="363.8672" y1="1007.5234" y2="1007.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.9165" x="48.9395" y="1002.4575">Ok (200) con nuevos Tokens</text></g><!--SRC=[fLHDRnen4BtlhnZb118Gcaezh4eaH3v0QXhKHEabKZMo1t2ps2lRIvJybDvwp3ctNlbZ7TiBOQEW7790wntcpOpdlRTU-OBWI-zJ3cT5zTk091WAhrOerFfPmmCCAq_QAv42MOR26midj5A201sSP2LQ_b-Lg3qS76Af3cNyjyl7Wv0od4wQIPC4lo8R7Z6dZgn4CpE5UOR56BKioAQ2_7vndsM30PoX8-3fTuTkhVze7XXMzDY6mI0xWUvn62A7wUNLDHnYpFLqgrjZjF8UBKrafoxXbT4Z8wa35yDHEzlanalmBvJQphffwwcUqpreqTe1lTngUtfLu0OB9T62M3zBDJST6F-SI5uxDz-BkK0h0iGi3Gn7rvERomxCIPFbe3TtfDqkT7FteH3a75o7X0xye9abjqYlcQGtHewt3PrpkBo3rb6_t-QUEa7SBYRiHXi-M3LVU32pW3ajG2fN6gSuom0MInIa4GhZwYc3s6R6BX4SpIkBlIphzNfmr8UbqYmx1mLNjy315wwFybUI35Mc52HZD4CQV9-VCjtEBAbRMfvFU99Tqh8qIljRFIQKP6EzXR7gCNAVRxJz5UF2ViLPZtU4aCIN7dlOtDtrEse8eyPIUKg7c_LVBcBsSBBjkW6DB773KO5gwQPMwU2S0be94cGzBTX9uK1UzDhR2bjBnDM5FMBbunOaDhXDrstI6v7V4Cejc8NXbLx_GrWmBGXKn90r1KfZ8uE1sx6n67XtPRL-SarcF-UrAaNy3ALjl65VcwJRZSImXsifn_nt3LidfqY4VC2q3HDrmDBA16FoljMyCcul_hmsgwuO0Vp12_VTxzplCQtftnJxW8jZR_UscVy3]--></g></svg>